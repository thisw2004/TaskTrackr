<div class="task-list-container">
  <div class="task-controls">
    <div class="search-container">
      <input 
        type="text" 
        class="search-input" 
        placeholder="Search tasks..." 
        #searchBox
        (input)="search(searchBox.value)"
      />
      <button *ngIf="searchBox.value" class="clear-search" (click)="searchBox.value=''; clearSearch()">Ã—</button>
    </div>
    
    <div class="filters">
      <div class="filter-group">
        <label>
          <input type="checkbox" [(ngModel)]="showCompleted" />
          Show completed
        </label>
      </div>
      
      <div class="filter-group">
        <label>Priority:</label>
        <select [(ngModel)]="selectedPriority">
          <option value="">All</option>
          <option value="low">Low</option>
          <option value="medium">Medium</option>
          <option value="high">High</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label>Category:</label>
        <select [(ngModel)]="selectedCategory">
          <option value="">All</option>
          <option value="general">General</option>
          <option value="work">Work</option>
          <option value="personal">Personal</option>
          <option value="shopping">Shopping</option>
          <option value="health">Health</option>
        </select>
      </div>
      
      <div class="filter-buttons">
        <button class="apply-filters" (click)="applyFilters()">Apply Filters</button>
        <button class="reset-filters" (click)="resetFilters()">Reset</button>
      </div>
    </div>
  </div>
  
  <div *ngIf="loading" class="loading">
    <p>Loading tasks...</p>
  </div>
  
  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>
  
  <div class="task-list" *ngIf="!loading">
    <!-- Search results -->
    <div *ngIf="searchResults.length > 0">
      <h3>Search Results</h3>
      <div *ngFor="let task of searchResults" class="task-item" [ngClass]="{'completed': task.isCompleted}">
        <app-task-item 
          [task]="task"
          (toggleComplete)="toggleTaskCompletion($event)"
          (delete)="deleteTask($event)"
        ></app-task-item>
      </div>
      <button class="clear-search-btn" (click)="clearSearch()">Clear Search</button>
    </div>
    
    <!-- All tasks with filters applied -->
    <div *ngIf="!searching && searchResults.length === 0">
      <div *ngIf="filteredTasks.length === 0" class="no-tasks">
        <p>No tasks found. Create your first task!</p>
      </div>
      
      <div *ngFor="let task of filteredTasks" class="task-item" [ngClass]="{'completed': task.isCompleted}">
        <app-task-item 
          [task]="task"
          (toggleComplete)="toggleTaskCompletion($event)"
          (delete)="deleteTask($event)"
        ></app-task-item>
      </div>
    </div>
  </div>
  
  <div class="add-task-button">
    <button routerLink="/tasks/new">+ New Task</button>
  </div>
</div>